/*! domPanZoom | https://github.com/StephanWagner/domPanZoom | MIT License | Copyright Stephan Wagner | https://stephanwagner.me */
function domPanZoomWrapper(){function t(t){this.options=Object.assign({},{wrapperElement:null,panZoomElement:null,center:!0,bounds:"cover",minZoom:.1,maxZoom:10,panStep:10,zoomStep:50,zoomSpeedWheel:1,zoomSpeedPinch:4,initialZoom:1,initialPanX:0,initialPanY:0,transitionSpeed:400,onInit:null,onChange:null,onZoom:null,onPan:null},t||{}),this.init()}return t.prototype.init=function(){var t,e=this.getWrapper(),i=this.getContainer();e.style.cursor="grab",e.style.overflow="hidden",this.evCache=[],this.curDiffCache=0,this.attachEvents(),this.options.bounds&&(t=e.clientWidth,e=e.clientHeight,t=t/i.clientWidth,i=e/i.clientHeight,"cover"===this.options.bounds?this.options.minZoom=Math.max(this.options.minZoom,t,i):this.options.minZoom=Math.max(this.options.minZoom,Math.min(t,i))),this.zoom=this.sanitizeZoom(this.options.initialZoom),this.x=this.options.initialPanX,this.y=this.options.initialPanY,this.options.center?this.center(!0):this.panTo(this.options.initialPanX,this.options.initialPanY,!0),this.fireEvent("onInit",this.getPosition())},t.prototype.fireEvent=function(t,e){this.options[t]&&this.options[t].bind(this)(e)},t.prototype.attachEvents=function(){var e=function(t){var e,i;1!=this.blockPan&&((e=t).touches&&t.touches.length&&(e=t.touches[0]),t=i=0,this.previousEvent&&(i=e.pageX-this.previousEvent.pageX,t=e.pageY-this.previousEvent.pageY),this.x+=i,this.y+=t,this.setPosition(!0),this.previousEvent=e,this.fireEvent("onPan",this.getPosition()))}.bind(this),t=function(t){t.preventDefault(),document.body.style.cursor="grabbing",this.getWrapper().style.cursor="grabbing",document.addEventListener("mousemove",e,{passive:!0}),document.addEventListener("touchmove",e,{passive:!0})}.bind(this);this.getWrapper().addEventListener("mousedown",t,{passive:!1}),this.getWrapper().addEventListener("touchstart",t,{passive:!1});t=function(){this.previousEvent=null,document.body.style.cursor=null,this.getWrapper().style.cursor="grab",document.removeEventListener("mousemove",e,{passive:!0}),document.removeEventListener("touchmove",e,{passive:!0})}.bind(this);document.addEventListener("mouseup",t,{passive:!0}),document.addEventListener("touchend",t,{passive:!0});t=function(t){t.preventDefault();var e=t.deltaY;0<t.deltaMode&&(e*=100);var i=this.options.zoomSpeedWheel,o=Math.sign(e),e=Math.min(.25,Math.abs(i*e/128)),e=this.sanitizeZoom(this.zoom*(e=1-o*e)),t=this.getEventOffsetToCenter(t);this.adjustPositionByZoom(e,t.x,t.y),this.zoom=e,this.setPosition(!0),this.fireEvent("onZoom",this.getPosition())}.bind(this);this.getWrapper().addEventListener("wheel",t,{passive:!1});t=function(t){this.evCache.push(t),this.zoomCache=this.zoom,2==this.evCache.length&&(this.curDiffCache=this.getTouchEventsDistance(this.evCache[0],this.evCache[1]),this.blockPan=!0)}.bind(this);this.getWrapper().addEventListener("pointerdown",t,{passive:!1});t=function(e){for(let t=0;t<this.evCache.length;t++)if(e.pointerId==this.evCache[t].pointerId){this.evCache[t]=e;break}var t,i;2==this.evCache.length&&(t=this.getTouchEventsDistance(this.evCache[0],this.evCache[1]),i=(t-=this.curDiffCache)/this.getContainer().clientWidth,i*=this.options.zoomSpeedPinch,t=this.sanitizeZoom(this.zoomCache*++i),i=this.getTouchEventsCenter(this.evCache[0],this.evCache[1]),i=this.getEventOffsetToCenter({target:this.evCache[0].target,clientX:i.clientX,clientY:i.clientY}),this.adjustPositionByZoom(t,i.x,i.y),this.zoom=t,this.setPosition(!0),this.fireEvent("onZoom",this.getPosition()))}.bind(this);this.getWrapper().addEventListener("pointermove",t,{passive:!1});var i=function(t){for(var e=0;e<this.evCache.length;e++)if(this.evCache[e].pointerId==t.pointerId){this.evCache.splice(e,1);break}this.evCache.length<2&&(this.blockPan=!1)}.bind(this);["pointerup","pointercancel","pointerout","pointerleave"].forEach(function(t){this.getWrapper().addEventListener(t,i,{passive:!1})}.bind(this))},t.prototype.getEventOffsetToParent=function(t){for(var e=t.target,i=0,o=0;e&&!isNaN(e.offsetLeft)&&!isNaN(e.offsetTop);)i+=e.offsetLeft-e.scrollLeft,o+=e.offsetTop-e.scrollTop,e=e.offsetParent;return{x:i=t.clientX-i,y:o=t.clientY-o}},t.prototype.getEventOffsetToCenter=function(t){var e=this.getWrapper(),i=this.getContainer(),o=.5*(e.clientWidth-i.clientWidth),n=.5*(e.clientHeight-i.clientHeight),i={x:0,y:0};return t&&(t=this.getEventOffsetToParent(t),i.x=-1*(e.clientWidth/2-t.x-window.scrollX),i.y=-1*(e.clientHeight/2-t.y-window.scrollY)),{x:this.x-o-i.x,y:this.y-n-i.y}},t.prototype.getTouchEventsDistance=function(t,e){return Math.abs(Math.hypot(t.pageX-t.pageX,t.pageY-e.pageY))},t.prototype.getTouchEventsCenter=function(t,e){return{pageX:(t.pageX+e.pageX)/2,pageY:(t.pageY+e.pageX)/2,clientX:(t.clientX+e.clientX)/2,clientY:(t.clientY+e.clientY)/2}},t.prototype.getPosition=function(){return{zoom:this.zoom,x:this.x,y:this.y}},t.prototype.setPosition=function(t){var e,i,o,n,s,h;return this.transition(!t),this.options.bounds&&(o=this.getWrapper(),n=this.getContainer(),e=o.clientWidth,i=o.clientHeight,s=n.clientWidth,h=n.clientHeight,t=s*this.zoom,o=h*this.zoom,s=-1*(n=s/2*(this.zoom-1))+e-s,t<e?(this.x<n&&(this.x=n),this.x>s&&(this.x=s)):(this.x=Math.min(this.x,n),this.x=Math.max(this.x,s)),h=-1*(s=h/2*(this.zoom-1))+i-h,o<i?(this.y<s&&(this.y=s),this.y>h&&(this.y=h)):(this.y=Math.min(this.y,s),this.y=Math.max(this.y,h))),this.getContainer().style.transform="matrix("+this.zoom+", 0, 0, "+this.zoom+", "+this.x+", "+this.y+")",this.fireEvent("onChange",this.getPosition()),this},t.prototype.sanitizeZoom=function(t){return t=(t=t<this.options.minZoom?this.options.minZoom:t)>this.options.maxZoom?this.options.maxZoom:t},t.prototype.getZoom=function(){return this.zoom},t.prototype.zoomTo=function(t,e){t=this.sanitizeZoom(t);var i=this.getEventOffsetToCenter();return this.adjustPositionByZoom(t,i.x,i.y),this.zoom=t,this.setPosition(e),this.fireEvent("onZoom",this.getPosition()),this},t.prototype.zoomIn=function(t,e){return this.zoomInOut(t,e,"in")},t.prototype.zoomOut=function(t,e){return this.zoomInOut(t,e,"out")},t.prototype.zoomInOut=function(t,e,i){!0!==t&&!1!==t||(e=t,t=null),t=t||this.options.zoomStep;var o=this.zoom,t=(100+t)/100;return this.zoomTo(o*(t="out"===i?1/t:t),e)},t.prototype.adjustPositionByZoom=function(t,e,i){var o=this.zoom,n=(t-o)/o,s=this.getContainer(),t=.5*s.clientWidth*o,o=.5*s.clientHeight*o;(e=t<e?Math.min(e,t):e)<-1*t&&(e=Math.max(e,-1*t)),(i=o<i?Math.min(i,o):i)<-1*o&&(i=Math.max(i,-1*o)),this.x+=e*n,this.y+=i*n},t.prototype.center=function(t){return this.panTo(50,50,t)},t.prototype.getPan=function(t){return{x:this.getPanX(t),y:this.getPanY(t)}},t.prototype.getPanX=function(t){if(t)return this.x;var e=this.getWrapper(),t=this.getContainer(),e=.5*e.clientWidth+-1*this.x;return(e+=(this.zoom-1)*(.5*t.clientWidth))/(t.clientWidth*this.zoom)*100},t.prototype.getPanY=function(t){if(t)return this.y;var e=this.getWrapper(),t=this.getContainer(),e=.5*e.clientHeight+-1*this.y;return(e+=(this.zoom-1)*(.5*t.clientHeight))/(t.clientHeight*this.zoom)*100},t.prototype.panTo=function(t,e,i){var o=this.getWrapper(),n=this.getContainer(),t=n.clientWidth*this.zoom*t/100*-1;t+=(this.zoom-1)*(.5*n.clientWidth),t+=.5*o.clientWidth;e=n.clientHeight*this.zoom*e/100*-1;return e+=(this.zoom-1)*(.5*n.clientHeight),e+=.5*o.clientHeight,this.x=t,this.y=e,this.setPosition(i),this.fireEvent("onPan",this.getPosition()),this},t.prototype.panLeft=function(t,e){return this.pan(t,e,"left")},t.prototype.panRight=function(t,e){return this.pan(t,e,"right")},t.prototype.panUp=function(t,e){return this.pan(t,e,"up")},t.prototype.panDown=function(t,e){return this.pan(t,e,"down")},t.prototype.pan=function(t,e,i){!0!==t&&!1!==t||(e=t,t=null),t=t||this.options.panStep;var o=this.getContainer();return panWidth=o.clientWidth*t/100*this.zoom,panHeight=o.clientWidth*t/100*this.zoom,"left"===i&&(this.x+=-1*panWidth),"right"===i&&(this.x+=panWidth),"up"===i&&(this.y+=-1*panHeight),"down"===i&&(this.y+=panHeight),this.setPosition(e),this.fireEvent("onPan",this.getPosition()),this},t.prototype.getWrapper=function(){return this.wrapperElement||(this.options.wrapperElement?("string"==typeof this.options.wrapperElement&&(this.options.wrapperElement=document.querySelector(this.options.wrapperElement)),this.options.wrapperElement&&this.options.wrapperElement instanceof Element?(this.wrapperElement=this.options.wrapperElement,this.options.wrapperElement):(console.error("The option wrapperElement needs to be a valid selector string or an instance of Element"),null)):(console.error("The option wrapperElement is required"),null))},t.prototype.getContainer=function(){return this.containerElement||(this.options.panZoomElement?("string"==typeof this.options.panZoomElement&&(this.options.panZoomElement=document.querySelector(this.options.panZoomElement)),this.options.panZoomElement&&this.options.panZoomElement instanceof Element?(this.containerElement=this.options.panZoomElement,this.options.panZoomElement):(console.error("The option panZoomElement needs to be a valid selector string or an instance of Element"),null)):(console.error("The option panZoomElement is required"),null))},t.prototype.transition=function(t){this.getContainer().style.transition=t?"transform "+this.options.transitionSpeed+"ms":null},t}!function(t,e){"function"==typeof define&&define.amd?define(["dompanzoom"],function(){return t.domPanZoom=e()}):"object"==typeof module&&module.exports?module.exports=t.domPanZoom=e():t.domPanZoom=e()}(this,function(){return domPanZoomWrapper()});